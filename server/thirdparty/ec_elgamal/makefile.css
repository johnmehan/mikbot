#--
#  Makefile to build EC ElGamal library and execute test.
#
#  Dependencies:
#  - CSS Make Framework.
#  - OpenSSL Dev Kit configured correctly.
#--

MODULES_ROOT = ../../../../..

include $(MODULES_ROOT)/scripts/make.platform

LIB_BASE_NAME = ec_elgamal
SMOOTH_SOURCE = ec_elgamal.c

SMOOTH_NATIVE_LIB = 1
NO_PUBLISH_LIBS = 1

SSL_HOME = C:/OpenSSL-Win32
SSL_INC_PATH = "$(SSL_HOME)/include"

.SECONDARY:

XCINCLUDE += $(INCLUDE_FLAG)$(SSL_INC_PATH)
CFLAGS += $(XCINCLUDE)

include $(MODULES_ROOT)/scripts/make.xlib_default

all:

ectest: ectest.c e_os.h
	gcc -g -lssl -Wall -o $@ $<

elgamal_test: ec_elgamal_test.c ec_elgamal.c ec_elgamal.h e_os.h
	gcc -g -lssl -Wall -o $@ $<

clean:
	$(RM) ectest elgamal_test *.$(OBJ_EXT)
	$(RM) $(LIB_BASE_NAME).$(OBJ_EXT) $(LIB_BASE_NAME).$(LIB_EXT)

